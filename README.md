# higurashi-killer
QQ群机器人文字游戏 寒蝉杀

基于Mirai框架和YiriMirai SDK，使用前请先自行参照文档配置环境

**因为临时消息容易被风控，所以开始游戏前需要加机器人好友**

## 准备阶段

### 开始游戏

修改`bot.py`的`admin`列表中的QQ号以赋予某人开始游戏的权利

之后回复 开始游戏 即可开始游戏

### 加入游戏

游戏开始后，回复 加入 即可加入游戏

目前只有8人局，满员后自动开始游戏

之后机器人会告知每名玩家对应的编号

### 分配角色

自动分配每个玩家的角色，并通过私信告知每名玩家自己的角色

之后会私信山狗阵营成员自己的队友编号

## 游戏进行阶段

### 夜晚

夜晚开始后，机器人会提示玩家选择行动。

玩家只需私信机器人指令即可。

指令如下：

| 指令     | 效果                                    | 例子     |
| -------- | --------------------------------------- | -------- |
| pass     | 跳过，什么都不做                        | pass     |
| 刀 A     | 刀编号为A的玩家，如果是蕾娜则视为强制刀 | 刀 1     |
| 阻止 A   | 阻止编号为A的玩家                       | 阻止 2   |
| 阻止 A B | 阻止编号为A和编号为B的玩家（圭一专属）  | 阻止 3 4 |
| 保护 A   | 保护编号为A的玩家                       | 保护 5   |
| 查验 A   | 查验编号为A的玩家                       | 查验 6   |

如果玩家扮演的角色无法执行选择的指令（比如让圭一保护某人），机器人会回复 指令错误

如果可以执行，会回复提交成功或者跳过成功

### 白天

所有玩家选择完毕后机器人自动计算并告诉大家结果

之后进入讨论阶段，限时2分钟

讨论阶段结束后进入投票阶段

玩家需要回复想要投票的人的编号，如想投1号，就回复1

如果想要弃权，就回复pass

投票或弃权成功后机器人会通知成功

投自己、无投票权限或多次投票会通知失败，需要重新投票

机器人不回复，说明回复内容格式不对，或者想投的玩家已死亡

投票结束后机器人计算结果并公布票数最多的玩家编号

如果票数最多的玩家是律子，那么该玩家需要在1分钟内回复 我是律子 来使用律子技能

不是律子或者超时未输入，该玩家都会被淘汰

之后机器人公布存活名单，继续下一天

## 胜利

如果场上无人幸存，那么平局。

如果场上仅剩赤坂，那么赤坂获胜

如果场上仅剩主角团和赤坂，那么主角团和赤坂获胜

如果场上仅剩杀人狂，那么杀人狂获胜

如果场上仅剩山狗和赤坂，那么山狗和赤坂获胜

如果场上仅剩山狗，那么山狗获胜
